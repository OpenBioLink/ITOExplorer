{"version":3,"sources":["logo.svg","d3sparql.js","SunburstChart.js","App.js","reportWebVitals.js","index.js","sparql.js"],"names":["d3sparql","SunburstChart","runSPARQL","then","data","drawChart","width","radius","format","d3","arc","startAngle","d","x0","endAngle","x1","padAngle","Math","min","padRadius","innerRadius","y0","outerRadius","max","y1","json","config","head","vars","results","bindings","pair","Map","size","root","parent","child","children","i","length","value","has","get","push","set","tree","traverse","node","list","map","subtotal","console","log","JSON","stringify","color","sum","sort","a","b","PI","height","partition","each","current","g","append","attr","style","path","selectAll","descendants","slice","join","depth","name","arcVisible","filter","on","clicked","text","ancestors","reverse","label","labelVisible","labelTransform","datum","event","p","target","t","transition","duration","tween","this","getAttribute","attrTween","x","y","id","Component","App","className","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","axios","require","exports","endpoint","query","Promise","resolve","params","URLSearchParams","post","headers","response","catch","error"],"mappings":"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","file":"static/js/main.e8ea63d9.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import * as d3 from \"d3\";\n\n//\n// d3sparql.js - utilities for visualizing SPARQL results with the D3 library\n//\n//   Web site: http://github.com/ktym/d3sparql/\n//   Copyright: 2013-2015 (C) Toshiaki Katayama (ktym@dbcls.jp)\n//   License: BSD license (same as D3.js)\n//   Initial version: 2013-01-28\n//\n\nvar d3sparql = {\n    version: \"d3sparql.js version 2018-05-04\",\n    debug: false  // set to true for showing debug information\n  }\n\n/*\n  Convert sparql-results+json object into a JSON tree of {\"name\": name, \"value\": size, \"children\": []} format like in the flare.json file.\n  Suitable for d3.layout.hierarchy() family\n    * cluster:    d3sparql.dendrogram()\n    * pack:       d3sparql.circlepack()\n    * partition:  d3sparql.sunburst()\n    * tree:       d3sparql.roundtree()\n    * treemap:    d3sparql.treemap(), d3sparql.treemapzoom()\n  Options:\n    config = {\n      \"root\":   \"root_name\",    // SPARQL variable name for root node (optional; default is the 1st variable)\n      \"parent\": \"parent_name\",  // SPARQL variable name for parent node (optional; default is the 2nd variable)\n      \"child\":  \"child_name\",   // SPARQL variable name for child node (ptional; default is the 3rd variable)\n      \"value\":  \"value_name\"    // SPARQL variable name for numerical value of the child node (optional; default is the 4th variable or \"value\")\n    }\n  Synopsis:\n    d3sparql.sparql(endpoint, sparql, render)\n    function render(json) {\n      var config = { ... }\n      d3sparql.roundtree(json, config)\n      d3sparql.dendrogram(json, config)\n      d3sparql.sunburst(json, config)\n      d3sparql.treemap(json, config)\n      d3sparql.treemapzoom(json, config)\n    }\n*/\nfunction tree(json, config) {\n    var head = json.head.vars\n    var data = json.results.bindings\n\n    var pair = new Map()\n    var size = new Map()\n    var root = config.root\n    var parent = true;\n    var child = true;\n    var children = true\n    for (var i = 0; i < data.length; i++) {\n      parent = data[i][config.parent].value\n      child = data[i][config.child].value\n      if (parent != child) {\n        if (pair.has(parent)) {\n          children = pair.get(parent)\n          children.push(child)\n        } else {\n          children = [child]\n        }\n        pair.set(parent, children)\n      }\n    }\n    function traverse(node) {\n      var list = pair.get(node)\n      if (list) {\n        var children = list.map(function(d) { return traverse(d) })\n        // sum of values of children\n        var subtotal = d3.sum(children, function(d) { return d.value })\n        // add a value of parent if exists\n        var total = d3.sum([subtotal, size.get(node)])\n        return {\"name\": node, \"children\": children}\n      } else {\n        return {\"name\": node, \"value\": size.get(node) || 1}\n      }\n    }\n    var tree = traverse(root)\n  \n    if (d3sparql.debug) { console.log(JSON.stringify(tree)) }\n    return tree\n  }\n\n  export{tree};","\nimport React, {Component} from 'react';\nimport * as d3 from \"d3\";\nimport {runSPARQL} from \"./sparql\";\nimport {tree} from \"./d3sparql\";\n\nclass SunburstChart extends Component {\n\n    componentDidMount() {\n        var query =`\n            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n            PREFIX ito: <https://identifiers.org/ito:>\n            SELECT DISTINCT ?parent_name ?parent ?child_name ?child\n            WHERE\n            {\n            ?child rdfs:subClassOf+ ito:Process .\n            ?child rdfs:subClassOf ?parent .\n            ?child rdfs:label ?child_name .\n            ?parent rdfs:label ?parent_name .\n            }\n        `\n        runSPARQL(\"http://explore.ai-strategies.org:9999/blazegraph/namespace/ITO/sparql\",query).then((data) => {\n            this.drawChart(data);\n        })\n    }\n\n    \n\n    drawChart(data) {\n\n        var width = 983\n        var radius = width / 6\n        var format = d3.format(\",d\")\n\n        var arc = d3.arc()\n            .startAngle(d => d.x0)\n            .endAngle(d => d.x1)\n            .padAngle(d => Math.min((d.x1 - d.x0) / 2, 0.005))\n            .padRadius(radius * 1.5)\n            .innerRadius(d => d.y0 * radius)\n            .outerRadius(d => Math.max(d.y0 * radius, d.y1 * radius - 1))\n\n        var partition = data => {\n            const root = d3.hierarchy(data)\n                .sum(d => d.value)\n                .sort((a, b) => b.value - a.value);\n            return d3.partition()\n                .size([2 * Math.PI, root.height + 1])\n              (root);\n          }\n\n        data = tree(data, {root: \"Process\", parent: \"parent_name\", child: \"child_name\"});\n        var color = d3.scaleOrdinal(d3.quantize(d3.interpolateRainbow, data.children.length + 1))\n        const root = partition(data);\n        \n        root.each(d => d.current = d);\n\n        const svg = d3.select(\"#sunburst\").append(\"svg\")\n            .attr(\"width\", width)\n            .attr(\"height\", width)\n            .attr(\"viewBox\", [0, 0, width, width])\n            .style(\"font\", \"10px sans-serif\");\n        \n        const g = svg.append(\"g\")\n            .attr(\"transform\", `translate(${width / 2},${width / 2})`);\n        \n        const path = g.append(\"g\")\n            .selectAll(\"path\")\n            .data(root.descendants().slice(1))\n            .join(\"path\")\n            .attr(\"fill\", d => { while (d.depth > 1) d = d.parent; return color(d.data.name); })\n            .attr(\"fill-opacity\", d => arcVisible(d.current) ? (d.children ? 0.6 : 0.4) : 0)\n            .attr(\"d\", d => arc(d.current));\n        \n        path.filter(d => d.children)\n            .style(\"cursor\", \"pointer\")\n            .on(\"click\", clicked);\n        \n        path.append(\"title\")\n            .text(d => `${d.ancestors().map(d => d.data.name).reverse().join(\"/\")}\\n${format(d.value)}`);\n        \n        const label = g.append(\"g\")\n            .attr(\"pointer-events\", \"none\")\n            .attr(\"text-anchor\", \"middle\")\n            .style(\"user-select\", \"none\")\n            .selectAll(\"text\")\n            .data(root.descendants().slice(1))\n            .join(\"text\")\n            .attr(\"dy\", \"0.35em\")\n            .attr(\"fill-opacity\", d => +labelVisible(d.current))\n            .attr(\"transform\", d => labelTransform(d.current))\n            .text(d => d.data.name);\n        \n        const parent = g.append(\"circle\")\n            .datum(root)\n            .attr(\"r\", radius)\n            .attr(\"fill\", \"none\")\n            .attr(\"pointer-events\", \"all\")\n            .on(\"click\", clicked);\n        \n        function clicked(event, p) {\n            parent.datum(p.parent || root);\n        \n            root.each(d => d.target = {\n            x0: Math.max(0, Math.min(1, (d.x0 - p.x0) / (p.x1 - p.x0))) * 2 * Math.PI,\n            x1: Math.max(0, Math.min(1, (d.x1 - p.x0) / (p.x1 - p.x0))) * 2 * Math.PI,\n            y0: Math.max(0, d.y0 - p.depth),\n            y1: Math.max(0, d.y1 - p.depth)\n            });\n        \n            const t = g.transition().duration(750);\n        \n            // Transition the data on all arcs, even the ones that arenâ€™t visible,\n            // so that if this transition is interrupted, entering arcs will start\n            // the next transition from the desired position.\n            path.transition(t)\n                .tween(\"data\", d => {\n                const i = d3.interpolate(d.current, d.target);\n                return t => d.current = i(t);\n                })\n            .filter(function(d) {\n                return +this.getAttribute(\"fill-opacity\") || arcVisible(d.target);\n            })\n                .attr(\"fill-opacity\", d => arcVisible(d.target) ? (d.children ? 0.6 : 0.4) : 0)\n                .attrTween(\"d\", d => () => arc(d.current));\n        \n            label.filter(function(d) {\n                return +this.getAttribute(\"fill-opacity\") || labelVisible(d.target);\n            }).transition(t)\n                .attr(\"fill-opacity\", d => +labelVisible(d.target))\n                .attrTween(\"transform\", d => () => labelTransform(d.current));\n        }\n        \n        function arcVisible(d) {\n            return d.y1 <= 3 && d.y0 >= 1 && d.x1 > d.x0;\n        }\n        \n        function labelVisible(d) {\n            return d.y1 <= 3 && d.y0 >= 1 && (d.y1 - d.y0) * (d.x1 - d.x0) > 0.03;\n        }\n        \n        function labelTransform(d) {\n            const x = (d.x0 + d.x1) / 2 * 180 / Math.PI;\n            const y = (d.y0 + d.y1) / 2 * radius;\n            return `rotate(${x - 90}) translate(${y},0) rotate(${x < 180 ? 0 : 180})`;\n        }\n        \n        //return svg.node();\n        \n    }\n\n    render() {\n        return <div id=\"sunburst\"/>;\n      }\n  \n  \n\n}\n\nexport default SunburstChart;","import logo from './logo.svg';\nimport './App.css';\nimport SunburstChart from \"./SunburstChart\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <SunburstChart/>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","\nconst axios = require('axios');\n\nfunction runSPARQL(endpoint, query){\n    console.log(query)\n    return new Promise((resolve) => {\n        const params = new URLSearchParams();\n        params.append('query', query);\n        axios.post(\n            endpoint, \n            params,\n            {headers: {\"Content-type\": \"application/x-www-form-urlencoded\"}}\n        ).then(function (response) {\n            resolve(response.data);\n        })\n        .catch(function (error) {\n            console.log(error);\n        });\n    });\n}\n\nexports.runSPARQL = runSPARQL;"],"sourceRoot":""}